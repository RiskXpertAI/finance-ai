<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <script defer src="/static/app.js"></script>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="login-container">
        <h1>ğŸ”µ RiskXpertAI ë¡œê·¸ì¸</h1>
            <a href="https://kauth.kakao.com/oauth/authorize?client_id={{ client_id }}&redirect_uri={{ redirect_uri }}&response_type=code" class="kakao-login-button">
                    ì¹´ì¹´ì˜¤ë¡œ ë¡œê·¸ì¸
            </a>
    </div>
    <script>
            window.onload = () => {
            const urlParams = new URLSearchParams(window.location.search);
            const newAccess = urlParams.get("access_token");
            const newRefresh = urlParams.get("refresh_token");

            if (newAccess && newRefresh) {
            // í† í° ì €ì¥
            localStorage.setItem("access_token", newAccess);
            localStorage.setItem("refresh_token", newRefresh);

            // ğŸ” ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì œê±° í›„ main ì´ë™
            window.location.href = "/main";
            return;
        }

            // ê¸°ì¡´ í† í°ì´ ì´ë¯¸ ì €ì¥ë˜ì–´ ìˆë‹¤ë©´ë§Œ ì´ë™
            const access = localStorage.getItem("access_token");
            const refresh = localStorage.getItem("refresh_token");

            if (access && refresh) {
            window.location.href = "/main";
        }

            // ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ê·¸ëƒ¥ ë¡œê·¸ì¸ í˜ì´ì§€ ìœ ì§€
        };
    </script>
</body>
</html>